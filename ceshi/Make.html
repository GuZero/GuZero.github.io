<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>大屏互动-制作中</title>
    <link rel="stylesheet" href="mui/mui.min.css">
    <link rel="stylesheet" href="static/css/index.css">
    <link rel="stylesheet" href="static/css/make.css">
</head>
<body>
<!--裁剪部分-->
<div class="htmleaf-container">
    <div id="clipArea"></div>
    <div class="footer">
        <div class="mui-table-view-cell pd">
            <div class="mui-row color_w">
                <div class="mui-col-xs-6 mui-text-left"><span id="cancle">取消</span></div>
                <div class="mui-col-xs-6 mui-text-right"><span id="finish" class="fr">完成</span></div>
            </div>
        </div>
    </div>
    <div id="view">

    </div>
</div>
<div class="mui-content main">
    <header>
        <div class="mui-row">
            <div class="mui-col-xs-1">
                <a href="index.html" class="mui-pull-left btn_share" id="goBack">
                    <img src="static/cut/btn_left_arrow_white@2x.png" alt="">
                </a>
            </div>
            <div class="mui-col-xs-11">
                <div class="mui-title">制作中</div>
            </div>
        </div>
    </header>
    <div id="two" class="mui-content">
        <div class="mui-content-padded">
            <div class="mui-row">
                <div class="mui-col-xs-5">
                    <button type="button" class="mui-btn mui-btn-outlined btn" id="make_btn">
                        1.制作
                    </button>
                </div>
                <div class="mui-col-xs-2"></div>
                <div class="mui-col-xs-5">
                    <button type="button" class="mui-btn mui-btn-outlined btn" id="choice_btn">
                        2.选择柜机
                    </button>
                </div>
            </div>
            <div class="show" id="show">
                <div class="mui-card">
                    <div class="mui-card-header mui-card-media">
                        <div id="uploadBox">
                            <a href="javascript:void(0);" id="upload">
                                <button type="button" class="mui-btn mui-btn-outlined upload_btn">
                                  上传图片
                                </button>
                                <input id="file" type="file" onchange="javascript:setImagePreview();" accept="image/*" multiple />
                            </a>
                            <p>建议上传1M以上 清晰度高的图片</p>
                        </div>
                        <div id="error">
                            <p>咣咣，上传失败/(ㄒoㄒ)/~~</p>
                            <div class="btn" id="retry"><span>重试</span></div>
                            <a href="javascript:void(0);"><label for="file">重选作品
                                <input id="file" type="file" onchange="javascript:setImagePreview();" accept="image/*" multiple />

                            </label></a>
                        </div>
                        <div id="photo"></div>
                    </div>
                    <div class="mui-card-content">
                        <div class="text">
                            <p class="txt1">点击输入文字</p>
                            <div class="text_1">
                                <textarea maxlength="140" id="text" rows="2"></textarea>
                                <p id="num1" class="pd_l mui-text-right"><span id="word">0</span>/140</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="cabinet" class="margin45" style="display: none">
                <ul class="mui-table-view">
                    <li class="mui-table-view-cell pd">
                        <div class="mui-row ">
                            <div class="mui-col-xs-2">
                                <img class="mui-pull-left" src="static/cut/img_cabinet@2x.png" width="24"height="24">
                            </div>
                            <div class="mui-col-xs-8" id="choose">
                                <p class="mui-ellipsis">南京格格货栈</p>
                            </div>
                            <div class="mui-col-xs-2 mui-text-right">
                                <img src="static/cut/btn_right_arrow@2x.png" width="24" height="24">
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="height32"></div>
                <ul class="mui-table-view">
                    <li class="mui-table-view-cell pd">
                        <div class="mui-row">
                            <div class="mui-col-xs-2">
                                <img src="static/cut/img_time@2x.png" alt="" width="24" height="24">
                            </div>
                            <div class="mui-col-xs-10">
                                <p>选择展示日期</p>
                            </div>
                        </div>
                    </li>
                    <li class="mui-table-view-cell pd">
                        <div class="mui-row" id="chooseDate">
                            <div class="mui-col-xs-4 mui-text-center">开始时间</div>
                            <div class="mui-col-xs-4 mui-text-center">------</div>
                            <div class="mui-col-xs-4 mui-text-center">结束时间</div>
                        </div>
                    </li>
                </ul>
                <div class="mui-row margin145">
                    <div class="mui-col-xs-3 mui-text-right">
                        <img src="static/cut/btn_Agreement_n@2x.png" alt="" width="18" height="18" id="agreement">
                    </div>
                    <div class="mui-col-xs-9">
                        <a href="#" class="agreement">同意柜机屏幕展示协议</a>
                    </div>
                </div>

            </div>

            <button type="button" class="mui-btn mui-btn-primary mui-btn-block bottom" id="nextBtn">下一步</button>
        </div>
        <div id="time">
            <div class="mui-row mui-table-view-cell">
                <div class="mui-col-xs-6" id="NO">
                    取消
                </div>
                <div class="mui-col-xs-6 blue mui-text-right">
                    确定
                </div>
            </div>
            <ul class="mui-table-view">
                <li class="mui-table-view-cell mui-text-center">
                    <div class="mui-row">
                        <div class="mui-col-xs-5 mui-text-right">2017-7-9</div>
                        <div class="mui-col-xs-2">到</div>
                        <div class="mui-col-xs-5 mui-text-left">2017-7-9</div>
                    </div>
                </li>
                <li class="mui-table-view-cell  mui-text-center">
                    <div class="mui-row">
                        <div class="mui-col-xs-5 mui-text-right">2017-7-9</div>
                        <div class="mui-col-xs-2">到</div>
                        <div class="mui-col-xs-5 mui-text-left">2017-7-9</div>
                    </div>
                </li>
                <li class="mui-table-view-cell  mui-text-center">
                    <div class="mui-row">
                        <div class="mui-col-xs-5 mui-text-right">2017-7-9</div>
                        <div class="mui-col-xs-2">到</div>
                        <div class="mui-col-xs-5 mui-text-left">2017-7-9</div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div id="choice" class="mui-content" style="display: none">
        <div class="mui-content-padded">
            <div class="mui-row mui-text-center color_w font_18">
                <div class="mui-col-xs-4 mui-text-right">朕要包下全</div>
                <div class="mui-col-xs-4 mui-h2">南京</div>
                <div class="mui-col-xs-4 mui-text-left">格格货栈</div>
            </div>
            <div class="height32"></div>
            <div class="show">
                <ul class="mui-table-view" id="cityList">
                    <li class="mui-table-view-cell pd">南京</li>
                    <li class="mui-table-view-cell pd">北京</li>
                    <li class="mui-table-view-cell pd">上海</li>
                    <li class="mui-table-view-cell pd">深圳</li>
                </ul>
            </div>
        </div>

    </div>
</div>
<script src="static/js/jquery-2.1.1.min.js"></script>
<script src="static/js/iscroll-zoom.js"></script>
<script src="static/js/hammer.js"></script>
<script src="static/js/jquery.photoclip.js"></script>


<script>
    $(function() {
        $('#text').keyup(function() {
            var len = $(this).val().length;
            if (len > 139) {
                alert('您输入超出了限制');
            }
            var num = 140 - len;
            $("#word").text(len);
        });
        $("#upload").click(function() {
            $(".htmleaf-container").fadeIn(300);
            $("#photo").show();
        });
        $("#cancle").click(function() {
            $(".htmleaf-container").fadeOut(300);
            $("#photo").hide();
        });

        $(".txt1").click(function() {
            $(this).hide();
            $(".text_1").show();
        });
        //删除图片
        $("#photo").click(function() {
            $(this).empty();
            $("#uploadBox").show();
            $("#photo").hide();
        });
//        点击1.制作
        $("#make_btn").click(function () {
            $(this).removeClass("active");
            $(this).toggleClass("active");
            if($("#show").is(":hidden")) {
                $("#show").show();
                $("#cabinet").hide();
                $(".mui-title").text("制作中");
            }
           
        });
//      选择柜机
        $("#choice_btn").click(function () {
            $(this).removeClass("active");
            $(this).toggleClass("active");
            $("#show").hide();
            $("#cabinet").show();
            $(".mui-title").text("选择快递柜");
        });
//      选择货栈
        $("#choose").click(function () {
            $("#two").hide();
            $("#choice").show();
        });
//       选择城市
        $("#cityList").children().click(function () {
            $("#two").show();
            $("#choice").hide();
        });
//        选择时间
        $("#chooseDate").click(function () {
            $("#time").show();
            $("#time").animate({bottom: '0px'}, "slow");
        });
//        取消选择时间
        $("#NO").click(function () {
            $("#time").animate({bottom: '-30%'}, "slow",function(){
                  $("#time").hide();
            });
           
        });
//        返回上一个页面
        $("#goBack").click(function () {
            location.href = "index.html";
        });
//        同意协议
        var flag=false;
        $("#agreement").click(function () {
            if(!flag){
                $("#agreement").attr({ src: "static/cut/btn_Agreement_h@2x.png", alt: "选中" });
                flag=true;
            }else {
                $("#agreement").attr({ src: "static/cut/btn_Agreement_n@2x.png", alt: "不选中" });
                flag=false;
            }
        });
//        下一步
        $("#nextBtn").click(function () {
            location.href = "examine.html";
        })
    })
</script>
<script>
    var obUrl = '';
    //document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    $("#clipArea").photoClip({
        width: 290,
        height: 310,
        file: "#file",
        view: "#view",
        ok: "#finish",
        loadStart: function() {
            console.log("照片读取中");
        },
        loadComplete: function() {
            console.log("照片读取完成");
        },
        clipFinish: function(dataURL) {
            console.log(dataURL);
        }
    });

</script>
<script>
    $(function() {

        $("#finish").click(function() {
            $("#uploadBox").hide();
            $("#photo").empty();
            $('#photo').append('<img src="' + imgsource + '" align="absmiddle"  id="img_s">');
            $(".htmleaf-container").hide();
        })
    });

</script>


<script type="text/javascript">
    function setImagePreview() {
        var preview, img_txt, localImag, file_head = document.getElementById("file_head"),
            picture = file_head.value;
        if (!picture.match(/.jpg|.gif|.png|.bmp/i)) return alert("您上传的图片格式不正确，请重新选择！"), !1;
        if (preview = document.getElementById("preview"), file_head.files && file_head.files[0]) preview.style.display = "block",
            preview.style.width = "100px",
            preview.style.height = "100px",
            preview.src = window.navigator.userAgent.indexOf("Chrome") >= 1 || window.navigator.userAgent.indexOf("Safari") >= 1 ? window.webkitURL.createObjectURL(file_head.files[0]) : window.URL.createObjectURL(file_head.files[0]);
        else {
            file_head.select(),
                file_head.blur(),
                img_txt = document.selection.createRange().text,
                localImag = document.getElementById("localImag"),
                localImag.style.width = "100px",
                localImag.style.height = "100px";
            try {
                localImag.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",
                    localImag.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = img_txt
            } catch (f) {
                return alert("您上传的图片格式不正确，请重新选择！"), !1
            }
            preview.style.display = "none",
                document.selection.empty()
        }
        return document.getElementById("DivUp").style.display = "block", !0
    }

</script>
</body>
</html>